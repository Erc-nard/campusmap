package com.example.campusmap.ui.map

import android.os.Build
import com.google.android.gms.maps.model.CameraPosition
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.Modifier
import com.google.android.gms.maps.GoogleMap
import com.google.android.gms.maps.model.LatLng
import com.google.maps.android.compose.*

// 건물 도형 데이터
data class BuildingPolygon(
    val id: String, // 건물 번호를 저장
    val points: List<LatLng>
)

@Composable
fun CampusMapScreen(
    modifier: Modifier = Modifier,
    cameraPositionState: CameraPositionState,
    mapProperties: MapProperties,
    markerState: MarkerState
) {
    val buildings = remember {
        listOf(
            BuildingPolygon(
                id = "E3",
                points = listOf(
                    LatLng(36.36873178141499, 127.36458014303662), // 파스쿠찌 쪽 점
                    LatLng(36.3686510424991, 127.36445997947378),
                    LatLng(36.36859703238999, 127.36444022739323),
                    LatLng(36.3681362505657, 127.36482807960252),
                    LatLng(36.3679718994553, 127.36479109798243),
                    LatLng(36.36791538982127, 127.3648521199115),
                    LatLng(36.36790381052078, 127.3649551372814),
                    LatLng(36.36793967820769, 127.36501380482284),
                    LatLng(36.36816483200543, 127.36505942810854),
                    LatLng(36.368234842120614, 127.36500404064817),
                    LatLng(36.368263993639694, 127.36504874844962),
                    LatLng(36.368433403632395, 127.36490468172687),
                    LatLng(36.36840651346734, 127.36485719870774),
                    LatLng(36.36845622187289, 127.36481007332206),
                    LatLng(36.36842264100866, 127.36474027322652),
                    LatLng(36.368589763725666, 127.36460733782762),
                    LatLng(36.36861900891381, 127.36462140298373),
                    LatLng(36.36863466868382, 127.36465769068059)
                )
            ),
            BuildingPolygon(
                id = "E3-1",
                points = listOf(
//                    LatLng(36.36808783328771, 127.36518999728246),
                    LatLng(36.36800001277097, 127.36517565828161),
                    LatLng(36.367990686091034, 127.36527868624363),
                    LatLng(36.367947940612396, 127.36525898642142),
                    LatLng(36.36788585117788, 127.36567098183544),
                    LatLng(36.36794662831159, 127.3656879805336),
                    LatLng(36.36794198608103, 127.36573253026066),
                    LatLng(36.36772133834167, 127.36568692625882),
                    LatLng(36.367693706540614, 127.36588179643157),
                    LatLng(36.36793235180408, 127.36593584238993),
                    LatLng(36.36794149990958, 127.3658913137784),
                    LatLng(36.367986506713244, 127.36590823881588),
                    LatLng(36.367945212028545, 127.36615040272729),
                    LatLng(36.36813433605872, 127.36619028900203),
                    LatLng(36.36817583558858, 127.36588126810976),
                    LatLng(36.36840773066515, 127.36593249707009),
                    LatLng(36.36842612921591, 127.36581001097872), // 최북단 점
                    LatLng(36.368358891881165, 127.36569548126806),
                    LatLng(36.36813376392113, 127.36564149898568),
                    LatLng(36.368122345955676, 127.36569158855826),
                    LatLng(36.36808407224187, 127.3656830522852),
                    LatLng(36.368134795017696, 127.36530443137667),
                    LatLng(36.368094276892826, 127.36529309907871),
                    LatLng(36.3681058053952, 127.3652067956013)
                )
            ),
            BuildingPolygon(
                id = "E3-2",
                points = listOf(
                    LatLng(36.36865627460756, 127.36569687297816),
                    LatLng(36.36864724595632, 127.36570240220671),
                    LatLng(36.36883540605288, 127.36605707273004),
                    LatLng(36.368871563392915, 127.36602102737614),
                    LatLng(36.36889839333936, 127.36608801104413),
                    LatLng(36.36902710731212, 127.36599111266148),
                    LatLng(36.368791849258294, 127.36556657739354),
                    LatLng(36.36909904452107, 127.36530615338602), // 최북단
                    LatLng(36.36906544692237, 127.36524192393519),
                    LatLng(36.36908352972936, 127.3652225081618),
                    LatLng(36.36882814593424, 127.36474773748084),
                    LatLng(36.36880333001979, 127.36475876463167),
                    LatLng(36.368769740625815, 127.36469174995219),
                    LatLng(36.368647769378576, 127.36479425312272),
                    LatLng(36.3686858475005, 127.36486686018436),
                    LatLng(36.36870389621919, 127.3648585872301),
                    LatLng(36.36871734555654, 127.36488093597477),
                    LatLng(36.36868573689832, 127.36490307431767),
                    LatLng(36.36890753955832, 127.36530804386008),
                    LatLng(36.3688871782829, 127.3653358061662),
                    LatLng(36.36884459465077, 127.36526317762878),
                    LatLng(36.3687451859895, 127.36535464252036),
                    LatLng(36.36872729056892, 127.36531277269388),
                    LatLng(36.36851493865726, 127.36550121001359),
                    LatLng(36.36858432677234, 127.36564917871415),
                    LatLng(36.368672402971114, 127.36557994730408),
                    LatLng(36.368679101999305, 127.36559947883873),
                    LatLng(36.3686316547113, 127.36564382869422),
                )
            ),
            BuildingPolygon(
                id = "E3-3",
                points = listOf(
                    LatLng(36.36911742620727, 127.36666011750197), // 최북단
                    LatLng(36.368933705393275, 127.36632775106573),
                    LatLng(36.36891111660962, 127.36634714542045),
                    LatLng(36.36886405341798, 127.36626613806926),
                    LatLng(36.36882339020627, 127.36630216218401),
                    LatLng(36.36879650060247, 127.36626023930316),
                    LatLng(36.368703943843755, 127.36631553097439),
                    LatLng(36.368712878566974, 127.36634064454688),
                    LatLng(36.36867902528467, 127.36635998603131),
                    LatLng(36.368690195812, 127.36639068156846),
                    LatLng(36.36859985770498, 127.36646268720995),
                    LatLng(36.36882605820293, 127.36690111032382),
                    LatLng(36.36889606060381, 127.36684850976683),
                    LatLng(36.36890951812042, 127.36686807319612),
                    LatLng(36.368979520506265, 127.36681547255385),
                    LatLng(36.368966105742814, 127.36678198055614),
                    LatLng(36.36899094749519, 127.36676259688836),
                    LatLng(36.36900659805787, 127.36680167089548),
                    LatLng(36.36906307446884, 127.36675179240135),
                    LatLng(36.369054174036464, 127.36671553580919)
                )
            ),
            BuildingPolygon(
                id = "E3-4",
                points = listOf(
                    LatLng(36.369550931384694, 127.36635293086029), // 최북단
                    LatLng(36.36949715221004, 127.36625796250298),
                    LatLng(36.36947004910055, 127.36628012162578),
                    LatLng(36.369443202189444, 127.36621870885931),
                    LatLng(36.36946578241251, 127.36620210006645),
                    LatLng(36.36936496537122, 127.36601776700672),
                    LatLng(36.36923621723491, 127.36612580864664),
                    LatLng(36.36921609479696, 127.36607557066381),
                    LatLng(36.36925449650536, 127.36604232142032),
                    LatLng(36.36923656719332, 127.36601159405191),
                    LatLng(36.369191492142804, 127.36601695443997),
                    LatLng(36.3691735542902, 127.36598901282184),
                    LatLng(36.36910354373062, 127.36604440005382),
                    LatLng(36.36915060707007, 127.36612540752232),
                    LatLng(36.369161888639134, 127.36611988886345),
                    LatLng(36.36919103119293, 127.3661673833311),
                    LatLng(36.36906455290001, 127.36626986361422),
                    LatLng(36.36916763100309, 127.36645142112992),
                    LatLng(36.36919474268885, 127.36642647643144),
                    LatLng(36.369219345141296, 127.36648509278493),
                    LatLng(36.36919675633304, 127.36650448716414),
                    LatLng(36.369248290964535, 127.36659665903086)
                )
            ),
            BuildingPolygon(
                id = "E4",
                points = listOf(
                    LatLng(36.36769790140649, 127.36377025010822),
                    LatLng(36.36806976035682, 127.3644684112558),
                    LatLng(36.368638917889555, 127.36400306145242),
                    LatLng(36.368264786429336, 127.36331045828928)
                ),
            ),
            BuildingPolygon(
                id = "E5",
                points = listOf(
                    LatLng(36.36958689127514, 127.36343082209508), // 최북단
                    LatLng(36.36943004385222, 127.3631487299258),
                    LatLng(36.36919063512295, 127.36334540629112),
                    LatLng(36.36917211196024, 127.36350967998641),
                    LatLng(36.369113612846945, 127.36348433603025),
                    LatLng(36.36895319920365, 127.36363402044869),
                    LatLng(36.36892601177829, 127.36368403744821),
                    LatLng(36.36891453526146, 127.36375362779823),
                    LatLng(36.36894573654481, 127.36386520310883),
                    LatLng(36.36893426840827, 127.36393200773716),
                    LatLng(36.369003743353645, 127.36405211871683),
                    LatLng(36.36908506842095, 127.36398006793179),
                    LatLng(36.36912331679268, 127.36399696064065),
                    LatLng(36.36912571396606, 127.36394961392021),
                    LatLng(36.36915508651963, 127.3639218931353),
                    LatLng(36.369256390630326, 127.3639474368012),
                    LatLng(36.369313917495845, 127.36355212613931),
                    LatLng(36.36937714278481, 127.36350506225921),
                    LatLng(36.36946717400891, 127.3635333387854),
                    LatLng(36.36947161199405, 127.36355564559588),
                    LatLng(36.36950318649619, 127.36354464941434),
                    LatLng(36.36949201523868, 127.36351395395737)
                )
            ),
            BuildingPolygon(
                id = "E6",
                points = listOf(
                    LatLng(36.37045064157008, 127.36462159258508),
                    LatLng(36.370137701132954, 127.36455048742582),
                    LatLng(36.370149246104866, 127.36445861007012),
                    LatLng(36.36992188173474, 127.3643990480649),
                    LatLng(36.36990133371167, 127.36448809738052),
                    LatLng(36.36960866075747, 127.36441987357088),
                    LatLng(36.369601817084195, 127.36444769940384),
                    LatLng(36.36956353479079, 127.36444194930539),
                    LatLng(36.3695542852322, 127.36451990781768),
                    LatLng(36.36959029762291, 127.36453121891347),
                    LatLng(36.36958792572014, 127.36457020869096),
                    LatLng(36.369666700686544, 127.3645956482227),
                    LatLng(36.36967334886183, 127.36463189435077),
                    LatLng(36.36970028162234, 127.36466544937275),
                    LatLng(36.36971827080401, 127.36467667644254),
                    LatLng(36.369752081298834, 127.36467126267635),
                    LatLng(36.36977464430296, 127.36466022485249),
                    LatLng(36.369790516626935, 127.36462686954545),
                    LatLng(36.37020699684818, 127.36472910170308),
                    LatLng(36.37021837189684, 127.36469293943898),
                    LatLng(36.370310664221, 127.36471844239952),
                    LatLng(36.37029922112135, 127.36477689078342),
                    LatLng(36.370416269794944, 127.36481086686341)
                )
            ),
            BuildingPolygon(
                id = "E6-1",
                points = listOf(
                    LatLng(36.36961409236529, 127.36411624937911),
                    LatLng(36.369537544723904, 127.36409917804426),
                    LatLng(36.36950994946871, 127.36428291039611),
                    LatLng(36.369496449060016, 127.36427727591547),
                    LatLng(36.36951933473905, 127.36416038017875),
                    LatLng(36.369508163640305, 127.36412968462875),
                    LatLng(36.36947438712902, 127.36412395568988),
                    LatLng(36.369463003761496, 127.3641629034254),
                    LatLng(36.3693954677229, 127.3641458740748),
                    LatLng(36.36937020174948, 127.36430454503586),
                    LatLng(36.36938819946149, 127.364312986247),
                    LatLng(36.36938812300689, 127.36433805779699),
                    LatLng(36.36940158093522, 127.36435762092137),
                    LatLng(36.3693417900018, 127.36475570661977),
                    LatLng(36.36935528188274, 127.36476412689797),
                    LatLng(36.369355230850516, 127.36478084125675),
                    LatLng(36.36933494625071, 127.36478353232778),
                    LatLng(36.36932584959381, 127.36481134751283),
                    LatLng(36.36933928192392, 127.36483926788001),
                    LatLng(36.36949010707404, 127.36487897288454),
                    LatLng(36.36949929732238, 127.36482051460187),
                    LatLng(36.36948129114095, 127.36481485899287),
                    LatLng(36.369488126393684, 127.36478981896684),
                    LatLng(36.36950160976572, 127.36480102499858)
                )
            ),
            BuildingPolygon(
                id = "E6-2",
                points = listOf(
                    LatLng(36.37001371273284, 127.3638367467998),
                    LatLng(36.369973202962136, 127.36382262923198),
                    LatLng(36.3699755237262, 127.36380035373081),
                    LatLng(36.36998450987486, 127.36380875293506),
                    LatLng(36.36999822236351, 127.36374474362866),
                    LatLng(36.369833845518905, 127.36371612060078),
                    LatLng(36.3698246982195, 127.36376065055042),
                    LatLng(36.36983818168804, 127.36377185645418),
                    LatLng(36.369838139276546, 127.36378578517412),
                    LatLng(36.36979535115219, 127.36378001440427),
                    LatLng(36.36974947856279, 127.36404723575097),
                    LatLng(36.36976974616866, 127.36405011595824),
                    LatLng(36.36971006671862, 127.36441198916418),
                    LatLng(36.36971674894057, 127.36443709233941),
                    LatLng(36.369905865006366, 127.3644797611599)
                )
            ),
            BuildingPolygon(
                id = "E6-3",
                points = listOf(
                    LatLng(36.370128230422964, 127.3647008761024),
                    LatLng(36.369952631841834, 127.36465826970469),
                    LatLng(36.36984476266617, 127.36530685387822),
                    LatLng(36.369876277698474, 127.36531535856862),
                    LatLng(36.3698578966876, 127.3654322755627),
                    LatLng(36.36989390898748, 127.36544358712341),
                    LatLng(36.369898448869435, 127.36543246521396),
                    LatLng(36.369918716439344, 127.36543534578604),
                    LatLng(36.3699164294561, 127.36544647823482),
                    LatLng(36.36999521274775, 127.3654691330091)
                )
            ),
            BuildingPolygon(
                id = "E6-4",
                points = listOf(
                    LatLng(36.37058775230088, 127.36398706769153),
                    LatLng(36.37054497267968, 127.3639785109835),
                    LatLng(36.37054728498688, 127.36395902109356),
                    LatLng(36.370560793894825, 127.36396186982702),
                    LatLng(36.37056997521251, 127.3639061964027),
                    LatLng(36.37042137720437, 127.36387486049186),
                    LatLng(36.370414474258354, 127.3639221870139),
                    LatLng(36.37043021909493, 127.36393061775897),
                    LatLng(36.37043015969164, 127.36395011811429),
                    LatLng(36.37038287426811, 127.36394154045772),
                    LatLng(36.37034149861691, 127.36421157047673),
                    LatLng(36.37035726041822, 127.36421442974722),
                    LatLng(36.370299884365465, 127.36455960149088),
                    LatLng(36.37031104684884, 127.364593083174),
                    LatLng(36.3704821651514, 127.36462731130091)
                )
            ),
            BuildingPolygon(
                id = "E6-5",
                points = listOf(
                    LatLng(36.370537623305886, 127.36343245829775),
                    LatLng(36.37045206397888, 127.36341534550938),
                    LatLng(36.37045667993326, 127.3633791515059),
                    LatLng(36.37038464646562, 127.36335931589082),
                    LatLng(36.37038002204386, 127.36339829562563),
                    LatLng(36.37035301267235, 127.36338981260562),
                    LatLng(36.370300339851575, 127.3636709334403),
                    LatLng(36.37002568963017, 127.36360279619399),
                    LatLng(36.37000505739282, 127.36371970334181),
                    LatLng(36.370288719143296, 127.36378788293554),
                    LatLng(36.37029326735397, 127.36377397511234),
                    LatLng(36.370459854653916, 127.36381653775854),
                    LatLng(36.370475921824095, 127.363719109352),
                    LatLng(36.37048940529457, 127.36373031534299)
                )
            ),
            BuildingPolygon(
                id = "E6-6",
                points = listOf(
                    LatLng(36.37097753079403, 127.36471876933194),
                    LatLng(36.370910292457744, 127.3646042367925),
                    LatLng(36.37050731257534, 127.36450763893971),
                    LatLng(36.37047119819407, 127.36452975691432),
                    LatLng(36.37040703700884, 127.36488325465201),
                    LatLng(36.37058262698288, 127.36492864758145),
                    LatLng(36.370619328385565, 127.36471431152681),
                    LatLng(36.370648539529945, 127.36473952018505),
                    LatLng(36.37065956586263, 127.36481757441062),
                    LatLng(36.370625670295034, 127.36485084589027),
                    LatLng(36.370669051040615, 127.36539985360919),
                    LatLng(36.37069844948167, 127.36536377550735),
                    LatLng(36.37070945836301, 127.36544740141643),
                    LatLng(36.37076798259865, 127.36546439003678),
                    LatLng(36.37077034627505, 127.3654281854771),
                    LatLng(36.37085590529633, 127.36544530053979)
                )
            ),
            BuildingPolygon(
                id = "E9",
                points = listOf(
                    LatLng(36.36992784736996, 127.36243788204352),
                    LatLng(36.36973067338563, 127.36208038766264),
                    LatLng(36.3689469566809, 127.36272305057373),
                    LatLng(36.368719540628575, 127.36268020878435),
                    LatLng(36.368689516969916, 127.36292242904315),
                    LatLng(36.368748033135006, 127.3629422010286),
                    LatLng(36.36892503013371, 127.36326617023703),
                    LatLng(36.36921865224354, 127.3630223882403),
                    LatLng(36.36943027245174, 127.36307351522528),
                    LatLng(36.36946485298478, 127.36281459926963),
                    LatLng(36.36956420896547, 127.36273984470263),
                    LatLng(36.36962243752547, 127.36285433182304),
                    LatLng(36.369895731952845, 127.36262716650313),
                    LatLng(36.369830752932636, 127.36250986204789)
                )
            ),
            BuildingPolygon(
                id = "E9-1",
                points = listOf(
                    LatLng(36.370109444520445, 127.36273123266075),
                    LatLng(36.369983975471, 127.36250221553108),
                    LatLng(36.369938841401584, 127.36252707822827),
                    LatLng(36.36992314717921, 127.36250193333457),
                    LatLng(36.369882510455774, 127.36252960266363),
                    LatLng(36.36992732328001, 127.36261059839241),
                    LatLng(36.36961789788269, 127.3628654538452),
                    LatLng(36.3695619053164, 127.36275654865095),
                    LatLng(36.36950770037886, 127.3628008693577),
                    LatLng(36.36950088246189, 127.36282033810303),
                    LatLng(36.369646457695794, 127.36310516326958)
                )
            ),
            BuildingPolygon(
                id = "E16-1",
                points = listOf(
                    LatLng(36.37139950612709, 127.36227477224624),
                    LatLng(36.37125157478897, 127.36202336129307),
                    LatLng(36.371100022568605, 127.36222323876561),
                    LatLng(36.37099335051728, 127.36248182595646),
                    LatLng(36.37101133144946, 127.36249583849984),
                    LatLng(36.37094325411029, 127.36265710040038),
                    LatLng(36.371138994164376, 127.3627443696382),
                    LatLng(36.37123463047781, 127.36241051362875)
                )
            ),

            BuildingPolygon(
                id = "W1",
                points = listOf(
                    LatLng(36.36578724054127, 127.3608559345713),
                    LatLng(36.36576023096076, 127.36084745294066),
                    LatLng(36.36576708220648, 127.36081684255045),
                    LatLng(36.365620752949816, 127.36077995372308),
                    LatLng(36.36555182764412, 127.36122255085033),
                    LatLng(36.36551580648237, 127.36121402746784),
                    LatLng(36.36552044702369, 127.36116947883971),
                    LatLng(36.36525478985244, 127.3611069674858),
                    LatLng(36.3652961584326, 127.36083695331659),
                    LatLng(36.36513183118949, 127.36079162474347),
                    LatLng(36.36500792625046, 127.36153481101223),
                    LatLng(36.36507322668582, 127.36154625554869),
                    LatLng(36.36506176828599, 127.36161027164852),
                    LatLng(36.3651518253387, 127.36163018765865),
                    LatLng(36.36515639859024, 127.36160792388606),
                    LatLng(36.36517666627501, 127.36161080328168),
                    LatLng(36.36521806126468, 127.36133243291836),
                    LatLng(36.365695347817905, 127.3614432794637)
                )
            ),
            BuildingPolygon(
                id = "W2",
                points = listOf(
                    LatLng(36.367440197899576, 127.36033985606882),
                    LatLng(36.3672408065262, 127.35996843972173),
                    LatLng(36.36701045651308, 127.3601512337342),
                    LatLng(36.36703508726889, 127.36020148955853),
                    LatLng(36.36702153626681, 127.36021256983155),
                    LatLng(36.367070780903006, 127.36031865285712),
                    LatLng(36.36701882974702, 127.36036298425353),
                    LatLng(36.3669381705168, 127.36021497124379),
                    LatLng(36.366924627912184, 127.36022326585964),
                    LatLng(36.366870827006565, 127.3601338761651),
                    LatLng(36.36678273711487, 127.36020868343412),
                    LatLng(36.36679173192368, 127.36021429624469),
                    LatLng(36.36677365831933, 127.36023092698328),
                    LatLng(36.366734821328194, 127.36040903104161),
                    LatLng(36.36673471208225, 127.36044524428866),
                    LatLng(36.366763974588494, 127.36045373628065),
                    LatLng(36.36677960201817, 127.36050116483244),
                    LatLng(36.36689835838978, 127.36071620994763),
                    LatLng(36.36693446368103, 127.36069687684302),
                    LatLng(36.366970291422824, 127.3607694699297),
                    LatLng(36.36699731782623, 127.36077238038108),
                    LatLng(36.367069006831215, 127.36090642422191),
                    LatLng(36.367059969981874, 127.36091473954093),
                    LatLng(36.367093586770686, 127.36097339420145),
                    LatLng(36.36706423172283, 127.36099554408396),
                    LatLng(36.367086600802395, 127.36104857544419),
                    LatLng(36.36707982526265, 127.36105411551101),
                    LatLng(36.36721651117219, 127.36129988777343),
                    LatLng(36.3672436049508, 127.36128051319994),
                    LatLng(36.36728859558069, 127.36130300674057),
                    LatLng(36.36734947445076, 127.36128657404052),
                    LatLng(36.36741046281581, 127.36123392775842),
                    LatLng(36.36744632392078, 127.36129537889464),
                    LatLng(36.36747109740716, 127.36129827913085),
                    LatLng(36.367491457752266, 127.36127051626458),
                    LatLng(36.36748253037872, 127.36124261799559),
                    LatLng(36.367466785339865, 127.36123418811361),
                    LatLng(36.367450998188076, 127.36123968653342),
                    LatLng(36.36743980106214, 127.36121734918737),
                    LatLng(36.36749851123252, 127.36117304936263),
                    LatLng(36.36729235534896, 127.36080438508242),
                    LatLng(36.36726300874566, 127.36082374943129),
                    LatLng(36.36723387245215, 127.36077347246416),
                    LatLng(36.36720676193031, 127.36079841851397),
                    LatLng(36.36714179787311, 127.36067554832212),
                    LatLng(36.36715989676486, 127.36065056066089),
                    LatLng(36.36716449506048, 127.36061993930939),
                    LatLng(36.36711743634847, 127.36053615154587),
                    LatLng(36.36717389337002, 127.36049184099517),
                    LatLng(36.36719851557435, 127.36054488268203)
                )
            ),
            BuildingPolygon(
                id = "W2-1",
                points = listOf(
                    LatLng(36.36775630117726, 127.36011009977946),
                    LatLng(36.367715984028756, 127.36003191415979),
                    LatLng(36.36769792724094, 127.36004297379793),
                    LatLng(36.36764194044973, 127.35993128762486),
                    LatLng(36.3675922759126, 127.35996448731841),
                    LatLng(36.36752953873233, 127.35984998456641),
                    LatLng(36.367466625287705, 127.35979398087211),
                    LatLng(36.36744872790356, 127.35975211298997),
                    LatLng(36.36737648406769, 127.35980192293732),
                    LatLng(36.367345094441646, 127.3597516359027),
                    LatLng(36.367207960992175, 127.35965350544568),
                    LatLng(36.367135675260364, 127.35971724357748),
                    LatLng(36.36725217174359, 127.35993506377426),
                    LatLng(36.36724764915642, 127.35994061432653),
                    LatLng(36.367489644095905, 127.36037908387301),
                    LatLng(36.36745124394084, 127.36041233516964),
                    LatLng(36.367509340274374, 127.360571388057),
                    LatLng(36.367535803257354, 127.36076093787453),
                    LatLng(36.367528447175914, 127.36095868871439),
                    LatLng(36.367505573052135, 127.36107279678079),
                    LatLng(36.36763156711696, 127.36112909304236),
                    LatLng(36.36767272541146, 127.3609287123759),
                    LatLng(36.367673213396245, 127.36076714364906),
                    LatLng(36.36764454796672, 127.36056086909981),
                    LatLng(36.36761331835988, 127.3604576539416),
                    LatLng(36.36757312746959, 127.36033768332385),
                    LatLng(36.36762510381471, 127.36028499460073),
                    LatLng(36.367452637998895, 127.35994991560474),
                    LatLng(36.36747294768005, 127.35993886635612),
                    LatLng(36.36761403250091, 127.36022087235317)
                )
            ),
            BuildingPolygon(
                id = "W8",
                points = listOf(
                    LatLng(36.37030155442772, 127.35954795479998),
                    LatLng(36.37020076061386, 127.35935248522394),
                    LatLng(36.36995462453869, 127.3595407868457),
                    LatLng(36.36996804971876, 127.35957149229289),
                    LatLng(36.369947723308485, 127.35958811348294),
                    LatLng(36.36987602449824, 127.35945685162487),
                    LatLng(36.36976986154979, 127.3595482940379),
                    LatLng(36.369893041449984, 127.35979122420488),
                    LatLng(36.369879473710476, 127.35980787644377),
                    LatLng(36.36990857682584, 127.35986929775578),
                    LatLng(36.36994470714002, 127.35984160627878),
                    LatLng(36.36995140710589, 127.35986113764848),
                    LatLng(36.36986332580489, 127.35993316239991),
                    LatLng(36.36982750597605, 127.35985778124854),
                    LatLng(36.36987041176944, 127.35982454942587),
                    LatLng(36.3697203228892, 127.35953970875211),
                    LatLng(36.36965032367611, 127.35959231643291),
                    LatLng(36.36963465398336, 127.35955881500266),
                    LatLng(36.36956014057505, 127.35961418760813),
                    LatLng(36.36956904316498, 127.35965044364512),
                    LatLng(36.36972137629464, 127.359938080094),
                    LatLng(36.369775571788274, 127.35989654301524),
                    LatLng(36.3698159057874, 127.35996915914696),
                    LatLng(36.369754917989674, 127.36002180802559),
                    LatLng(36.3698377966997, 127.36018097956303),
                    LatLng(36.370242039635414, 127.35985969034822),
                    LatLng(36.37014347407281, 127.35967258816234),
                )
            ),

            BuildingPolygon(
                id = "N7-1",
                points = listOf(
                    LatLng(36.372054377653484, 127.35878433670705),
                    LatLng(36.37200030805744, 127.35878408841954),
                    LatLng(36.371998682444556, 127.35857514138137),
                    LatLng(36.37186126391051, 127.35857172487005),
                    LatLng(36.37185887722173, 127.35861628761295),
                    LatLng(36.37183634822228, 127.35861618420894),
                    LatLng(36.37183635768877, 127.3593627934358),
                    LatLng(36.37199856646959, 127.35936353949732),
                    LatLng(36.371999077514964, 127.35919360433063),
                    LatLng(36.37205313873273, 127.3591966387259)
                )
            ),
            BuildingPolygon(
                id = "N7-2",
                points = listOf(
                    LatLng(36.37222783788171, 127.35803852030215),
                    LatLng(36.372061114934645, 127.3580405421626),
                    LatLng(36.37205039880043, 127.35860880907843),
                    LatLng(36.37211347999645, 127.3586090986063),
                    LatLng(36.37210886548262, 127.35864529367059),
                    LatLng(36.37222376337329, 127.35864582108034)
                )
            ),
            BuildingPolygon(
                id = "N11",
                points = listOf(
                    LatLng(36.374065455200686, 127.35904709209814), // 최북단의 최서단
                    LatLng(36.374013638523465, 127.35904685396419),
                    LatLng(36.37401608397941, 127.35898278874637),
                    LatLng(36.37390343065532, 127.35898505704868),
                    LatLng(36.373899067160266, 127.35893767621072),
                    LatLng(36.373567899354896, 127.3589333688292),
                    LatLng(36.37357072146024, 127.3594933511086),
                    LatLng(36.37401004514717, 127.35949258667365),
                    LatLng(36.37401282605755, 127.35931708570749),
                    LatLng(36.37406464273324, 127.35931732402068),
                )
            ),
            BuildingPolygon(
                id = "N12",
                points = listOf(
                    LatLng(36.3743202323757, 127.35973081919266), // 최북단의 최서단
                    LatLng(36.374286447283346, 127.35972787768682),
                    LatLng(36.374286648593944, 127.35966101599439),
                    LatLng(36.37425285511238, 127.35966086042278),
                    LatLng(36.374250627374764, 127.3596524923436),
                    LatLng(36.374081676737525, 127.3596461427144),
                    LatLng(36.3740786687659, 127.35989686302194),
                    LatLng(36.37396375414146, 127.3599019055212),
                    LatLng(36.37396623361994, 127.35982669680543),
                    LatLng(36.37403607348373, 127.35982701846527),
                    LatLng(36.37403688710353, 127.35955678665668),
                    LatLng(36.37381834752304, 127.35955856681932),
                    LatLng(36.373822341734495, 127.35972852668262),
                    LatLng(36.373750248968506, 127.3597281947401),
                    LatLng(36.37374746745745, 127.35990369509673),
                    LatLng(36.373900664581235, 127.35990440081999),
                    LatLng(36.37389594054981, 127.35997681319945),
                    LatLng(36.37428570042985, 127.35997582312368),
                    LatLng(36.3742903069566, 127.35994241303794),
                    LatLng(36.37431508884219, 127.35994252721324),
                )
            ),
            BuildingPolygon(
                id = "N13",
                points = listOf(
                    LatLng(36.3734630397363, 127.36008904103214),
                    LatLng(36.3734382746414, 127.36008335506696),
                    LatLng(36.37343829143496, 127.36007778332),
                    LatLng(36.37310936817448, 127.36007626739283),
                    LatLng(36.373107543418115, 127.3599341780628),
                    LatLng(36.37333284172146, 127.35993243008687),
                    LatLng(36.37329903984216, 127.35993506027182),
                    LatLng(36.373296358797404, 127.36007712918402),
                    LatLng(36.37333240518187, 127.36007729531337),
                    LatLng(36.37333284172146, 127.35993243008687),
                    LatLng(36.37336437391482, 127.35993536126269),
                    LatLng(36.373364877400554, 127.35976820900699),
                    LatLng(36.37295935555117, 127.35976634167102),
                    LatLng(36.37295678380951, 127.3598721938403),
                    LatLng(36.37293200191809, 127.35987207969296),
                    LatLng(36.37293633147403, 127.35993060341556),
                    LatLng(36.372967846883, 127.35993910628792),
                    LatLng(36.372966948418764, 127.36023719295399),
                    LatLng(36.37299622770687, 127.36024011385008),
                    LatLng(36.37301182157755, 127.36029868958644),
                    LatLng(36.37311320203566, 127.36029915710859),
                    LatLng(36.373126904254164, 127.36023793047399),
                    LatLng(36.373300385879666, 127.3602359444577),
                    LatLng(36.37330273117885, 127.36020531029068),
                    LatLng(36.373437896717675, 127.36020871937257),
                    LatLng(36.37344026720701, 127.3601697275302),
                    LatLng(36.3734650406966, 127.36017262764845)
                )
            ),
            BuildingPolygon(
                id = "N13-1",
                points = listOf(
                    LatLng(36.37346688196995, 127.36030914588302),
                    LatLng(36.373433088486145, 127.36030899003572),
                    LatLng(36.373431062420316, 127.36023376107045),
                    LatLng(36.373309414276264, 127.36023041427065),
                    LatLng(36.373302428748985, 127.36030560155999),
                    LatLng(36.37298026418656, 127.36030411584974),
                    LatLng(36.37297623704051, 127.36089192126248),
                    LatLng(36.3732916428858, 127.36089337817643),
                    LatLng(36.37329478748429, 127.36059808655935),
                    LatLng(36.37346640294391, 127.36046794072391)
                )
            ),
            BuildingPolygon(
                id = "N14",
                points = listOf(
                    LatLng(36.37389890478544, 127.35824119327827),
                    LatLng(36.373871878348176, 127.35823828342451),
                    LatLng(36.37387257149841, 127.35800705459134),
                    LatLng(36.373843283807055, 127.35800692038463),
                    LatLng(36.373841122737296, 127.3579762652877),
                    LatLng(36.373782547353926, 127.35797599689789),
                    LatLng(36.37378020262518, 127.3580066313247),
                    LatLng(36.373719374342016, 127.35800635258919),
                    LatLng(36.373718413838965, 127.35832672925787),
                    LatLng(36.373641823617845, 127.35832359206341),
                    LatLng(36.373633852639294, 127.358727513804),
                    LatLng(36.37379604465175, 127.3587338303688),
                    LatLng(36.37379692266529, 127.35844131226386),
                    LatLng(36.37389379733231, 127.35844175671697),
                )
            ),
            BuildingPolygon(
                id = "N16",
                points = listOf(
                    LatLng(36.37394869393994, 127.3574140001945),
                    LatLng(36.373849566363454, 127.35741354670839),
                    LatLng(36.37384367411883, 127.35712378335555),
                    LatLng(36.37369274650213, 127.35711752161721),
                    LatLng(36.373689277061196, 127.35752425028092),
                    LatLng(36.373770373106, 127.3575274073137),
                    LatLng(36.37376943892021, 127.35783942655037),
                    LatLng(36.37371084684601, 127.35784473003162),
                    LatLng(36.37371042953008, 127.3579840242245),
                    LatLng(36.37381405455341, 127.35798728496547),
                    LatLng(36.37382112208453, 127.35788423808644),
                    LatLng(36.373870694216286, 127.35788167923802),
                    LatLng(36.37387530850218, 127.35784548331134),
                    LatLng(36.37391585234589, 127.35784845494366),
                    LatLng(36.37391655308171, 127.3576144400792),
                    LatLng(36.373945840773956, 127.35761457413912),
                )
            ),
            BuildingPolygon(
                id = "N19",
                points = listOf(
                    LatLng(36.374199725256275, 127.35633977591883),
//                    LatLng(),
//                    LatLng(),
//                    LatLng(),
//                    LatLng(),
//                    LatLng(),
//                    LatLng(),
//                    LatLng(),
                )
            )
        )
    }

    var selectedBuildingId by remember { mutableStateOf<String?>(null) }

    GoogleMap(
        modifier = modifier,
        cameraPositionState = cameraPositionState,
        properties = mapProperties,
        onMapClick = {
            selectedBuildingId = null
        }
    ) {
        Marker(
            state = markerState,
            title = "Marker"
        )
        buildings.forEach { building ->
            val isSelected = selectedBuildingId == building.id
            val buildingColor = when (building.id[0]) {
                'E' -> Color(239, 153, 37)
                'W' -> Color(111, 182, 70)
                'N' -> Color(223, 52, 48)
                else -> Color.Black
            }
            Polygon(
                points = building.points,
                fillColor = if (isSelected) buildingColor.copy(0.4f) else buildingColor.copy(0.2f),
                strokeColor = if (isSelected) buildingColor else Color.Transparent,
                strokeWidth = 3f,
                clickable = true,
                onClick = {
                    selectedBuildingId = building.id
                }
            )
        }
    }
}
